echo "Running pre-commit checks..."

echo "Validating commit message..."

pnpm commitlint --edit $1

pnpm run format-check

CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)
if [ "$CURRENT_BRANCH" = "main" ] ; then
  echo "Direct commits to main are not allowed!"
  exit 1
fi

pnpm audit

echo "All checks passed! Proceeding with commit."