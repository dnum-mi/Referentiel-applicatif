model External {
  id                       String     @id @default(uuid())
  externalSourceId    String          
  externalSource      ExternalSource @relation("ExternalSourceExternal", fields: [externalSourceId], references: [id],  onDelete: Restrict, onUpdate: Cascade)
  value           String
  label           String
  shortName       String
  lastSourceUpdate  DateTime
  metadataId      String              
  metadata        Metadata            @relation("ExternalsMetadata", fields: [metadataId], references: [id])
  actors          Actor[]             @relation("ActorOrganization")
  applicationId   String?             
  application     Application?        @relation("ApplicationExternalSources", fields: [applicationId], references: [id])

  @@map("externals")
  User User[]
}

model ExternalSource {
 id                       String     @id @default(uuid())
  type           ExternalSourceType @unique
  uri            String
  valueType      ExternalSourceValueType
  metadataId     String                  
  metadata       Metadata                @relation("ExternalSourcesMetadata", fields: [metadataId], references: [id])
  externals      External[]              @relation("ExternalSourceExternal")

  @@map("externalSources")
}

enum ExternalSourceType {
  organization
  application
  regulation
  financial
  population
}

enum ExternalSourceValueType {
  url
  uri
  identifier
  name
}